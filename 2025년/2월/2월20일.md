## react-suspense ê¹Šíˆ ì•Œì•„ë³´ê¸°


Suspense ëŠ” ë¹„ë™ê¸°ì ìœ¼ë¡œ ì‘ì—…ì„ ì²˜ë¦¬í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ "ìì‹" ìœ¼ë¡œ ê°€ì§„ë‹¤

Suspense ëŠ” ë°ì´í„° Fetching ê³¼ Rendering ì„ ë™ì‹œì— í•˜ê¸° ìœ„í•´ì„œ ë§Œë“¤ì–´ì¡Œë‹¤. 

ì¦‰

Fetching -> ì‹œì‘
Rendering -> ì‹œì‘ (Loading)
Fetching-> ì¢…ë£Œ
Rendering -> Albums ë³´ì—¬ì¤Œ

````javascript
import { Suspense } from 'react';
import Albums from './Albums.js';

export default function ArtistPage({ artist }) {
  return (
    <>
      <h1>{artist.name}</h1>
      <Suspense fallback={<Loading />}> 
        <AlbumsKO artistId={artist.id} />
          <AlbumsEN artistId={artist.id} />
      </Suspense>
    </>
  );
}

function Loading() {
  return <h2>ğŸŒ€ Loading...</h2>;
}

//======================//

import {use} from 'react';
import { fetchData } from './data.js';

export default function AlbumsKO({ artistId }) {
    const albums = use(fetchData(`/${artistId}/albumsKO`)); //=> 10ì´ˆê±¸ë¦¼
    return (
        <ul>
            {albums.map(album => (
                <li key={album.id}>
                    {album.title} ({album.year})
                </li>
            ))}
        </ul>
    );
}

//======================//

import {use} from 'react';
import { fetchData } from './data.js';

export default function AlbumsKO({ artistId }) {
    const albums = use(fetchData(`/${artistId}/albumsKO`)); //=> 10ì´ˆê±¸ë¦¼
    return (
        <ul>
            {albums.map(album => (
                <li key={album.id}>
                    {album.title} ({album.year})
                </li>
            ))}
        </ul>
    );
}


````
ìœ„ ì†ŒìŠ¤ë¥¼ ì‚´í´ë³´ë©´,

Albums ì»´í¬ë„ŒíŠ¸í•´ì„œ 10ì´ˆ ì •ë„ ê±¸ë¦¬ëŠ” fetchData ë¥¼ ìˆ˜í–‰í•˜ê²Œ ëœë‹¤.

Albums ì€ Suspense ì˜ ìì‹ìœ¼ë¡œ ìˆê¸° ë•Œë¬¸ì—, ë¦¬ì•¡íŠ¸ëŠ” Albums ì˜ ë°ì´í„° íŒ¨ì¹­ì´ ì‹œì‘ë¨ì„ ê°ì§€í•˜ê³ , 

ê³§ë°”ë¡œ fallback ì— ìˆëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ëŒ€ì²´í•˜ì—¬ ë³´ì—¬ì¤€ë‹¤. 

ì´í›„ íŒ¨ì¹­ì´ ëë‚˜ê²Œ ë˜ë©´ ì´ë¥¼ ê°ì§€í•œ ë¦¬ì•¡íŠ¸ê°€ Albums ì»´í¬ë„ŒíŠ¸ë¥¼ ë³´ì—¬ì£¼ê²Œ ëœë‹¤. 

    ê¼­ ì§ì† ë¶€ëª¨ë¡œ ìˆëŠ” ê²ƒ ë¿ë§Œ ì•„ë‹ˆë¼, ì»´í¬ë„ŒíŠ¸ê°€ ì¼ì‹œ ì¤‘ë‹¨ë˜ë©´ ê°€ì¥ ê°€ê¹Œìš´ ìƒìœ„ Suspense ì»´í¬ë„ŒíŠ¸ì˜ fallback ì„ í‘œì¶œí•˜ê²Œ ëœë‹¤. 


ê·¼ë° ì–´ì©Œë‹¤ê°€ ì´ëŸ° ê¸°ëŠ¥ì´ ë‚˜ì˜¤ê²Œ ë˜ì—ˆì„ê¹Œ?...

ì›ë˜ ë°ì´í„°ë¥¼ í˜¸ì¶œí•œ ë’¤ì— ìŠ¤í”¼ë„ˆë¥¼ í‘œì‹œí•˜ê¸° ìœ„í•´ì„œ ì•„ë˜ì™€ ê°™ì€ ì§“ì„ í–ˆë‹¤.

````javascript

const promise = fetchProfileData();

function ProfilePage() {
    const [user, setUser] = useState(null);
    const [post, setPost] = useState(null);

    useEffect(() => {
        promise.then(data => {
            setUser(data.user);
            setPosts(data.posts);
        })
    }, []);
    
    if(user === null) {
        return <Spnner />
    }
    
    return (
        <>
            <h1>{user.name}</h1>
            <PropfileTimeLine posts={{post}} />
        </>  
    )
    

}

function ProfilePage({post}) {
    if(post === null) {
        return <Spnner />
    }

    return (
        <>
            <h1>{post.name}</h1>
        </>
    )

}

````

ë­ ëŒ€ì¶© ì´ëŸ°ì‹ì´ë‹¤. 

ìœ„ ì†ŒìŠ¤ë¥¼ ë³´ë©´ ë¬¸ì œì ì´ ëª‡ê°€ì§€ ë³´ì´ëŠ”ë°, 

ë§Œì•½ user ëŠ” ì–¼ë§ˆ ì•ˆê±¸ë¦¬ëŠ”ë° post ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì˜¤ë˜ê±¸ë¦°ë‹¤ë©´, 

ë‘ê°œì˜ ì»´í¬ë„ŒíŠ¸ ëª¨ë‘ë‹¤ ê¸°ë‹¤ë ¤ì•¼ í• ê²ƒì´ë‹¤. 

ê·¸ë ‡ê²Œ ë˜ë©´ ê°œë³„ì ìœ¼ë¡œ ë°ì´í„° íŒ¨ì¹­ ìƒíƒœì— ë”°ë¼ ë¡œë”© ìŠ¤í”¼ë„ˆë¥¼ ë³´ì—¬ì£¼ê¸°ê°€ ë„ˆë¬´ ì–´ë ¤ì›Œ ì§ˆ ê²ƒì´ë‹¤. 

í•˜ì§€ë§Œ ì•„ë˜ì²˜ëŸ¼ suspense ë¥¼ ì‚¬ìš©í•˜ë©´ 

````javascript
 <Suspense fallback={<Loading />}> 
        <AlbumsKO artistId={artist.id} />
          <Suspense  fallback={<Loading />}>
              <AlbumsEN artistId={artist.id} />
          </Suspense>
      </Suspense>
````
AlbumsKO ì™€ AlbumsEN ë¥¼ ê°ê° fallback ì„ ì¤„ìˆ˜ ìˆë‹¤. 
ë¨¼ì € íŒ¨ì¹­ì´ ë˜ëŠ” ê²ƒë¶€í„° ê°€ëŠ¥í•˜ë‹¤ëŠ” ëœ»

ì¦‰ Suspense ëŠ” ìì‹ìœ¼ë¡œ ìˆëŠ” ì»´í¬ë„ŒíŠ¸ì˜ ë¹„ë™ê¸° ì‘ì—…ì¤‘ì´ë¼ëŠ” ê±¸ ë¦¬ì•¡íŠ¸ì— ì¸ì‹ ì‹œí‚¤ëŠ” ì‘ì—…ì´ë¼ê³  í•  ìˆ˜ ìˆë‹¤. 


### ê·¸ëŸ¼ ì–´ë–¤ ìƒí™©ì— react ëŠ” ì–´ë–¤ ìƒí™©ì¼ë•Œ ì»´í¬ë„ŒíŠ¸ê°€ Suspense ìƒíƒœë¼ëŠ”ê±¸ ì¸ì‹í• ê¹Œ?

    React ê°€ Suspense ìƒíƒœë¥¼ ê°ì§€í•˜ëŠ” ê¸°ì¤€ì€ "ì»´í¬ë„ŒíŠ¸ê°€ ì¼ì‹œì¤‘ë‹¨" ë˜ì—ˆì„ë•Œ ë°œìƒ

1. Promise ë¥¼ ë°˜í™˜ë°›ìœ¼ë©´ Suspense ìƒíƒœë¡œ ì¸ì‹í•¨



#### ê¼­ fatch ì—¬ì•¼ í•˜ë‚˜? ë§Œì•½ íŠ¹ì • ì¡°ê±´ì„ ë§Œì¡±í•œ ì´í›„ì— ì»´í¬ë„ŒíŠ¸ë¥¼ ë¶ˆëŸ¬ì˜¤ê³  ì‹¶ë‹¤ë©´ í•  ìˆ˜ ìˆì„ê¹Œ?

````javascript
<Suspense  fallback={<Loading />}>
<ModalComponent/>
<Suspense  fallback={<Loading />}>
````

````javascript
import { useState, useTransition, Suspense } from "react";

function filterOption(data) {
  return new Promise((resolve) => {
    // í•„í„°ë§ ì‘ì—…
    const filteredData = data.filter((item) => item.isActive);

    // ìƒíƒœ ì—…ë°ì´íŠ¸ ë¹„ë™ê¸° ì²˜ë¦¬
    resolve(filteredData);
  });
}

function useFilteredData(data) {
  if (!data) throw filterOption(data); // ğŸš€ Suspense ìƒíƒœ ìœ ì§€
  return data;
}

function ModalData({ data }) {
  const filteredData = useFilteredData(data);

  return (
    <ul>
      {filteredData.map((item) => (
        <li key={item.id}>{item.name}</li>
      ))}
    </ul>
  );
}

export default function ModalComponent({ data }) {
  return (
      <>
           ë­ ëŒ€ì¶© ëª¨ë‹¬ í•´ë” ë“±ë“±,,,
      <ModalData data={data} />
     </>
  );
}
````

ë§Œì•½ì— ëª¨ë‹¬ ì—´ê¸°ì „ì— ë°ì´í„°ê°€ ë‹¤ ì„¸íŒ…ëœ í›„ì— ëª¨ë‹¬ì„ ì—´ê³ ì‹¶ë‹¤ë©´,

ì €ëŸ° ë°©ì‹ìœ¼ë¡œ filterOption ì—ë‹¤ê°€ í”„ë¡œë¯¸ìŠ¤ ê±¸ê³  ë‹¤ ëë‚˜ë©´ resolve ì‹œì¼œì„œ í”„ë¡œë¯¸ìŠ¤ ëë‚´ì£¼ë©´ ì„œìŠ¤íœìŠ¤ê°€ í’€ë¦´êº¼ ê°™ê¸´ í•˜ë‹¤.

ë‚´ì¼ í•œë²ˆ ì‹¤í—˜í•´ë³´ë„ë¡í•˜ê² ë‹¤. 


